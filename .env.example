# =============================================================================
# ENVIRONMENT
# =============================================================================
# Set to "production" to enforce required secrets
ENVIRONMENT=development

# =============================================================================
# SECURITY KEYS (REQUIRED in production, optional in development)
# =============================================================================
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=
JWT_SECRET_KEY=

# =============================================================================
# DATABASE
# =============================================================================
# Use 'db' as host for Docker Compose, 'localhost' for local dev
SQLALCHEMY_DATABASE_URI=postgresql://postgres:password@db:5432/flaskdb

# Postgres container settings (used by docker-compose)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
POSTGRES_DB=flaskdb

# =============================================================================
# JWT OPTIONS
# =============================================================================
JWT_ACCESS_TOKEN_EXPIRES=3600
JWT_REFRESH_TOKEN_EXPIRES=604800
JWT_TOKEN_LOCATION=headers
JWT_HEADER_NAME=Authorization
JWT_HEADER_TYPE=Bearer

# =============================================================================
# REDIS
# =============================================================================
# Use 'redis' as host in Docker Compose, 'localhost' for local dev
REDIS_URL=redis://redis:6379/0
RATELIMIT_STORAGE_URL=redis://redis:6379/0

# =============================================================================
# CORS
# =============================================================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3001,http://127.0.0.1:3001

# =============================================================================
# EMAIL / PASSWORD RESET
# =============================================================================
MAIL_SERVER=smtp.example.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_DEFAULT_SENDER=noreply@yourcompany.com

# How long password reset links are valid (in minutes)
PASSWORD_RESET_EXPIRES_MINUTES=60

# =============================================================================
# S3 / STORAGE CONFIGURATION
# =============================================================================
# Storage provider: "localstack" for local dev, "aws" for production
STORAGE_PROVIDER=localstack

# S3 bucket name (same for LocalStack and AWS)
S3_BUCKET_NAME=controlhub-uploads

# AWS region
AWS_REGION=us-east-1

# LocalStack endpoint (only used when STORAGE_PROVIDER=localstack)
# Use "http://localstack:4566" in Docker, "http://localhost:4566" for local dev
AWS_ENDPOINT_URL=http://localstack:4566

# AWS credentials (use "test" for LocalStack, real credentials for AWS)
# For production AWS, prefer IAM roles or environment-based credential chain
AWS_ACCESS_KEY_ID=test
AWS_SECRET_ACCESS_KEY=test

# =============================================================================
# UPLOAD LIMITS
# =============================================================================
# Maximum file size in bytes (default: 50MB)
MAX_UPLOAD_SIZE=52428800

# Allowed content types (comma-separated, empty = allow all)
ALLOWED_CONTENT_TYPES=image/jpeg,image/png,image/gif,image/webp,application/pdf,text/plain,text/csv,application/json,application/xml

# Presigned URL expiry in seconds (default: 15 minutes)
PRESIGNED_URL_EXPIRY=900

# =============================================================================
# REGISTRATION CONTROL
# =============================================================================
# Comma-separated list of allowed email domains (empty = no restriction)
# Example: ALLOWED_REGISTRATION_DOMAINS=mycompany.com,partner.com
ALLOWED_REGISTRATION_DOMAINS=
