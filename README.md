# Web Forx ControlHub

**Admin, audit, and operational control for modern teams.**

*by Web Forx Global Inc.*

---

This project is a full-stack enterprise admin portal built with:

Flask (Python) â€” backend API

PostgreSQL â€” database

React + Vite â€” admin UI

Docker Compose â€” containerized multi-service environment

This README explains:

What the app does

Folder structure

How to run the project locally

How to debug

How to add new admin users

Common issues and fixes

ğŸ“Œ 1. Project Overview

This is a production-style admin system containing:

Backend (API)

User authentication (JWT)

Admin roles

File upload endpoints

Jobs table and analytics

Protected endpoints requiring tokens

Frontend (Admin UI)

Secure login

Protected routes (dashboard, jobs, uploads)

Modern sidebar layout

Token-based authentication

Fetches data from API container

Database (Postgres)

Stores users, jobs, uploaded file metadata

Managed via Alembic migrations

ğŸ“ 2. Folder Structure
flask-advanced-app/
â”œâ”€â”€ api/                # Flask Backend
â”‚   â”œâ”€â”€ app.py
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ Dockerfile
â”‚
â”œâ”€â”€ ui/                 # React Admin UI
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ Dockerfile
â”‚
â”œâ”€â”€ docker-compose.yml  # Multi-service infrastructure
â””â”€â”€ README.md
ğŸš€ 3. How to Run the Project Locally

These are the exact steps anyone can follow.

Prerequisites

Install:

Docker Desktop

Git

âœ… Step 1 â€” Clone the repo
git clone <repo-url>
cd flask-advanced-app
âœ… Step 2 â€” Build the entire stack

Use no-cache on first build:

docker compose build --no-cache
âœ… Step 3 â€” Start all containers
docker compose up -d

Check that everything is running:

docker ps

You should see:

flask-advanced-app-api   (port 9000)
flask-advanced-app-ui    (port 3001)
flask-advanced-app-db    (port 5432)
ğŸ§ª Step 4 â€” Test API is running

Open in browser:

http://localhost:9000/auth/login

You should see:

405 METHOD NOT ALLOWED (correct)

Test POST login:

curl -X POST http://localhost:9000/auth/login \  
  -H "Content-Type: application/json" \  
  -d '{"email":"admin@example.com", "password":"Admin123!"}'

Expect:

{"access_token": "..."}
ğŸ§ª Step 5 â€” Access the UI

Open your browser:

http://localhost:3001/ui/login

Login using the admin account (see TESTING_CHECKLIST.md for setup):

Email: admin@example.com
Password: Admin123!
âš ï¸ IMPORTANT â€” UI API URL

The UI talks to the API using Docker internal hostname:

http://api:9000

This is required because React runs inside Docker.

If the UI cannot fetch data â†’ check /ui/src/api.js:

const API_BASE = "http://api:9000";
ğŸ› ï¸ 4. Database Migrations

Run migrations inside the API container.

Enter API container:
docker exec -it flask-advanced-app-api bash
Apply migrations:
alembic upgrade head
Create new migration:
alembic revision --autogenerate -m "add role column"
ğŸ‘¤ 5. Creating New Admin Users

Open postgres inside container:

docker exec -it flask-advanced-app-db bash
psql -U postgres

Insert admin user:

INSERT INTO "user" (email, password_hash, role)
VALUES ('admin@example.com', '$2b$12$...', 'admin');

(Use bcrypt hash generated by backendâ€™s utils.)

ğŸ 6. Common Fixes
UI fails with "Failed to fetch"

Cause: UI cannot reach API. Fix:

ensure API_BASE uses http://api:9000

rebuild UI:

docker compose build ui --no-cache
API returns database connection error

Check:

docker logs flask-advanced-app-db

Or restart DB:

docker compose restart db
Migration errors

Reset DB (dev only):

docker compose down -v

Then rebuild:

docker compose up -d --build
ğŸ§¹ 7. Stop All Services
docker compose down

To also remove db data:

docker compose down -v
ğŸ“¦ 8. Environment Variables

Example .env file:

POSTGRES_PASSWORD=postgres
POSTGRES_USER=postgres
POSTGRES_DB=flaskapp
JWT_SECRET=supersecretkey

Backend reads env vars via Dockerfile + compose.

ğŸ‰ 9. Everything is Now Ready

You now have a full local development environment with:

UI on port 3001

API on port 9000

Postgres on port 5432

This README helps any new developer spin up the entire system in minutes.